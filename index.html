<!doctype html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link type="text/css" rel="stylesheet" href="css/leaflet.css"/>
    <link type="text/css" rel="stylesheet" href="css/ritmap.css"/>
    <script src="js/leaflet.js"></script>
    <script src="js/data.js"></script>
    <title>Rit Map</title>

    <!-- Plug in the map information -->
    <script type = "text/javascript">
        window.onload=function() {
            // Create Map
            var map = L.map('map').setView([51.505, -0.09], 13);

            // Pull from the OSM API
            var osmURL = "http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";

            // In order to use open street map, we need to attribute to it.
            var osmAttrib = 'Map Data &copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors';

            // Create the OSM layer.
            var osm = new L.TileLayer(osmURL, {minZoom: 8, maxZoom: 20, attribution: osmAttrib});

            // Set the map to start at RIT at zoom level 15.
            map.setView(new L.LatLng(43.085, -77.678419), 15);

            // Add the osm layer to the map
            map.addLayer(osm);

            // Create the icon.
            var icon = L.icon({
                iconUrl:"media/marker-icon.png",
                iconSize: [25,41],
                iconAnchor:[12.5, 41],
                popupAnchor:[0, -30],
            });

            // Insert the data.
            for (i = 0; i < mapData.mapData.length; ++i) {
                var data = mapData.mapData[i];
                var markerHTML = '<div class = "center">';
                markerHTML += '<p><strong>' + data.title + '</strong></p>';
                if (data.image != "") {
                    markerHTML += '<p><a href = "media/places/' + data.image + '" target = "_blank">';
                    markerHTML += '<img src="media/places/' + data.image + '" alt="' + data.image + '"/></p></a>';
                }
                else {
                    markerHTML += '<p><a href="https://github.com/ritmap/ritmap.github.io#submitting-content" target="_blank">';
                    markerHTML += '<img src="media/no_image.png" alt="no image"/></a></p>';
                }                
                markerHTML += '<p>' + data.desc + '</p>';
                markerHTML += '</div>';
                var newPopup = L.popup({maxWidth:500})
                                   .setContent(markerHTML);
                var newMarker = L.marker([data.lat, data.lon])
                                    .setIcon(icon)
                                    .addTo(map)
                                    // Must open then close the popup, or the image will appear
                                    // outside of it.
                                    .bindPopup(newPopup).openPopup().closePopup();
            }
        }
    </script>

</head>
<body>
    <a href="https://github.com/ritmap/ritmap.github.io"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>

    <h1>RIT's Most Interesting Locations</h1>
    <noscript><p>Javascript is required... Sorry :(</p></noscript>
    <div class="center" id="map" style = "height:500px; width:1000px;">
    </div>
</body>
</html>

